"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("child_process");function e(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var o=e(require("git-repo-info"));function a(t){return t<10?"0".concat(t):t}function c(t){var e=t.getFullYear(),o=a(t.getMonth()+1),c=a(t.getDate()),r="日一二三四五六".charAt(t.getDay()),n=a(t.getHours()),i=a(t.getMinutes()),p=a(t.getSeconds());return"".concat(e,"-").concat(o,"-").concat(c,"(周").concat(r,") ").concat(n,":").concat(i,":").concat(p)}exports.getGitRepositryInfo=function(e){void 0===e&&(e=!0);var a=t.execSync("git ls-remote --get-url origin").toString().split("/"),r=a[a.length-1].replace(/\n|\r|.git/g,""),n=o.default(),i=n.branch,p=n.committer,l=n.commitMessage,g=n.committerDate;return{repositry:r,branch:i,lastCommitInfo:{committer:p,committerDate:g=c(new Date(g)),commitMessage:e?l:"Last Commit Message Has Been hidden"},buildDate:c(new Date)}},exports.logProjectInfo=function(t){if(t){var e=t.repositry,o=t.branch,a=t.lastCommitInfo,c=t.buildDate,r=t.extraLogInfo,n="%c 版本打包信息",i=[],p=[{label:"Repositry",value:"".concat(e," -> ").concat(o)},{label:"Last Commit",value:"".concat(a.committer," -> ").concat(a.committerDate)},{label:"Build Date",value:"".concat(c)}];Array.isArray(r)&&(p=p.concat(r));for(var l=0;l<p.length;l++){var g=p[l],s=g.label,x=g.value;n+="%c \n".concat(s,": %c ").concat(x),i.push("color: #b2b942; font-size: 16px;line-height: 24px;"),i.push("color: #888; font-size: 16px;line-height: 24px;")}i=[n,"padding: 0 20px;background: #ded92a;text-shadow: 0 1px 0 #ccc,0 2px 0 #c9c9c9,0 3px 0 #bbb,0 4px 0 #b9b9b9,0 5px 0 #aaa,0 6px 1px rgba(0,0,0,.1),0 0 5px rgba(0,0,0,.1),0 1px 3px rgba(0,0,0,.3),0 3px 5px rgba(0,0,0,.2),0 5px 10px rgba(0,0,0,.25),0 10px 10px rgba(0,0,0,.2),0 20px 20px rgba(0,0,0,.15);font-size:24px;height:36px;line-height:36px;text-align:center;margin-bottom:8px;margin-top: 4px"].concat(i),console.log.apply(null,i)}else console.error("【打包信息插件】 确保传入logProjectInfo()方法正确的项目打包信息")};

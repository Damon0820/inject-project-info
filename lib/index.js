import{execSync as t}from"child_process";import e from"git-repo-info";function o(t){return t<10?"0".concat(t):t}function a(t){var e=t.getFullYear(),a=o(t.getMonth()+1),c=o(t.getDate()),n="日一二三四五六".charAt(t.getDay()),r=o(t.getHours()),i=o(t.getMinutes()),p=o(t.getSeconds());return"".concat(e,"-").concat(a,"-").concat(c,"(周").concat(n,") ").concat(r,":").concat(i,":").concat(p)}function c(o){void 0===o&&(o=!0);var c=t("git ls-remote --get-url origin").toString().split("/"),n=c[c.length-1].replace(/\n|\r|.git/g,""),r=e(),i=r.branch,p=r.committer,l=r.commitMessage,g=r.committerDate;return{repositry:n,branch:i,lastCommitInfo:{committer:p,committerDate:g=a(new Date(g)),commitMessage:o?l:"Last Commit Message Has Been hidden"},buildDate:a(new Date)}}function n(t){if(t){var e=t.repositry,o=t.branch,a=t.lastCommitInfo,c=t.buildDate,n=t.extraLogInfo,r="%c 版本打包信息",i=[],p=[{label:"Repositry",value:"".concat(e," -> ").concat(o)},{label:"Last Commit",value:"".concat(a.committer," -> ").concat(a.committerDate)},{label:"Build Date",value:"".concat(c)}];Array.isArray(n)&&(p=p.concat(n));for(var l=0;l<p.length;l++){var g=p[l],m=g.label,x=g.value;r+="%c \n".concat(m,": %c ").concat(x),i.push("color: #b2b942; font-size: 16px;line-height: 24px;"),i.push("color: #888; font-size: 16px;line-height: 24px;")}i=[r,"padding: 0 20px;background: #ded92a;text-shadow: 0 1px 0 #ccc,0 2px 0 #c9c9c9,0 3px 0 #bbb,0 4px 0 #b9b9b9,0 5px 0 #aaa,0 6px 1px rgba(0,0,0,.1),0 0 5px rgba(0,0,0,.1),0 1px 3px rgba(0,0,0,.3),0 3px 5px rgba(0,0,0,.2),0 5px 10px rgba(0,0,0,.25),0 10px 10px rgba(0,0,0,.2),0 20px 20px rgba(0,0,0,.15);font-size:24px;height:36px;line-height:36px;text-align:center;margin-bottom:8px;margin-top: 4px"].concat(i),console.log.apply(null,i)}else console.error("【打包信息插件】 确保传入logProjectInfo()方法正确的项目打包信息")}export{c as getGitRepositryInfo,n as logProjectInfo};
